class i{rapidApiKey;useRealData;constructor(){this.rapidApiKey="your_rapidapi_key_here",this.useRealData=!0}async searchJobs(t){if(!this.useRealData||!this.rapidApiKey)return console.warn("âš ï¸ Real data mode disabled or API key missing. Using fallback data."),this.generateFallbackJobs(t);try{console.log("ðŸ” Fetching REAL jobs from LinkedIn, Indeed, Glassdoor...");const e=await this.fetchFromJSearch(t);return console.log(`âœ… Found ${e.length} REAL jobs from multiple sources`),e}catch(e){return console.error("âŒ Error fetching real job data:",e),this.generateFallbackJobs(t)}}async fetchFromJSearch(t){try{const e=new URL("https://jsearch.p.rapidapi.com/search");e.searchParams.append("query",`${t.query} in ${t.location||"United States"}`),e.searchParams.append("page",(t.page||1).toString()),e.searchParams.append("num_pages","1"),t.datePosted&&e.searchParams.append("date_posted",t.datePosted),t.jobType&&e.searchParams.append("employment_types",t.jobType);const r=await fetch(e.toString(),{method:"GET",headers:{"X-RapidAPI-Key":this.rapidApiKey,"X-RapidAPI-Host":"jsearch.p.rapidapi.com"}});if(!r.ok)throw new Error(`JSearch API error: ${r.status}`);const o=await r.json();return this.transformJSearchJobs(o.data||[])}catch(e){throw console.error("JSearch API error:",e),e}}async searchLinkedInJobs(t){if(!this.rapidApiKey)return[];try{console.log("ðŸ”— Fetching REAL jobs from LinkedIn...");const e=new URL("https://linkedin-jobs-search.p.rapidapi.com/search");e.searchParams.append("keywords",t.query),e.searchParams.append("location",t.location||"United States"),e.searchParams.append("datePosted",t.datePosted||"week"),e.searchParams.append("sort","mostRelevant");const r=await fetch(e.toString(),{method:"GET",headers:{"X-RapidAPI-Key":this.rapidApiKey,"X-RapidAPI-Host":"linkedin-jobs-search.p.rapidapi.com"}});if(!r.ok)throw new Error(`LinkedIn API error: ${r.status}`);const o=await r.json();return console.log(`âœ… Found ${o.length} REAL LinkedIn jobs`),this.transformLinkedInJobs(o)}catch(e){return console.error("LinkedIn API error:",e),[]}}async searchIndeedJobs(t){if(!this.rapidApiKey)return[];try{console.log("ðŸ“‹ Fetching REAL jobs from Indeed...");const e=new URL("https://indeed-jobs-search.p.rapidapi.com/search");e.searchParams.append("query",t.query),e.searchParams.append("location",t.location||"United States"),e.searchParams.append("page",(t.page||1).toString());const r=await fetch(e.toString(),{method:"GET",headers:{"X-RapidAPI-Key":this.rapidApiKey,"X-RapidAPI-Host":"indeed-jobs-search.p.rapidapi.com"}});if(!r.ok)throw new Error(`Indeed API error: ${r.status}`);const o=await r.json();return console.log(`âœ… Found ${o.jobs?.length||0} REAL Indeed jobs`),this.transformIndeedJobs(o.jobs||[])}catch(e){return console.error("Indeed API error:",e),[]}}transformJSearchJobs(t){return t.map(e=>({id:e.job_id||`jsearch_${Date.now()}_${Math.random()}`,title:e.job_title||"Position Available",company:e.employer_name||"Company",companyLogo:e.employer_logo||void 0,location:e.job_city&&e.job_state?`${e.job_city}, ${e.job_state}`:e.job_country||"Remote",description:e.job_description||"No description available",salary:this.formatSalary(e.job_min_salary,e.job_max_salary,e.job_salary_currency),jobType:this.parseJobType(e.job_employment_type),postedDate:this.formatDate(e.job_posted_at_datetime_utc),applyUrl:e.job_apply_link||e.job_google_link||"#",source:this.detectSource(e.job_publisher),requirements:this.extractRequirements(e.job_description),benefits:this.extractBenefits(e.job_highlights?.Benefits||[])}))}transformLinkedInJobs(t){return t.map(e=>({id:e.id||`linkedin_${Date.now()}_${Math.random()}`,title:e.title||"Position Available",company:e.company||"Company",companyLogo:e.companyLogo||void 0,location:e.location||"Remote",description:e.description||"No description available",salary:e.salary||"Competitive",jobType:[e.type||"Full-time"],postedDate:this.formatDate(e.postedDate),applyUrl:e.url||"#",source:"linkedin",requirements:this.extractRequirements(e.description),benefits:[]}))}transformIndeedJobs(t){return t.map(e=>({id:e.id||`indeed_${Date.now()}_${Math.random()}`,title:e.title||"Position Available",company:e.company||"Company",companyLogo:e.companyLogo||void 0,location:e.location||"Remote",description:e.description||e.snippet||"No description available",salary:e.salary||"Competitive",jobType:[e.type||"Full-time"],postedDate:this.formatDate(e.date),applyUrl:e.url||"#",source:"indeed",requirements:this.extractRequirements(e.description||e.snippet),benefits:[]}))}formatSalary(t,e,r){if(!t&&!e)return"Competitive";const o=r||"USD",a=o==="USD"?"$":o==="INR"?"â‚¹":o;return t&&e?`${a}${this.formatNumber(t)} - ${a}${this.formatNumber(e)}`:t?`${a}${this.formatNumber(t)}+`:e?`Up to ${a}${this.formatNumber(e)}`:"Competitive"}formatNumber(t){return t>=1e3?`${Math.round(t/1e3)}k`:t.toString()}parseJobType(t){if(!t)return["Full-time"];const e=[],r=t.toLowerCase();return r.includes("full")&&e.push("Full-time"),r.includes("part")&&e.push("Part-time"),r.includes("contract")&&e.push("Contract"),r.includes("intern")&&e.push("Internship"),r.includes("remote")&&e.push("Remote"),e.length>0?e:["Full-time"]}formatDate(t){if(!t)return"Recently";try{const e=new Date(t),o=new Date().getTime()-e.getTime(),a=Math.floor(o/(1e3*60*60)),n=Math.floor(a/24);return a<1?"Just now":a<24?`${a} hours ago`:n<7?`${n} days ago`:n<30?`${Math.floor(n/7)} weeks ago`:e.toLocaleDateString()}catch{return"Recently"}}detectSource(t){if(!t)return"linkedin";const e=t.toLowerCase();return e.includes("linkedin")?"linkedin":e.includes("indeed")?"indeed":e.includes("glassdoor")?"glassdoor":e.includes("ziprecruiter")?"ziprecruiter":"linkedin"}extractRequirements(t){if(!t)return[];const e=[];return t.toLowerCase(),[/(\d+\+?\s*years?\s*(?:of\s*)?experience)/gi,/(bachelor'?s|master'?s|phd|degree)/gi,/(python|java|javascript|react|node\.?js|aws|docker|kubernetes)/gi].forEach(o=>{const a=t.match(o);a&&a.slice(0,3).forEach(n=>{e.includes(n)||e.push(n)})}),e.slice(0,5)}extractBenefits(t){return t.slice(0,5)}generateFallbackJobs(t){console.log("âš ï¸ Using fallback job data");const e=["Google","Microsoft","Apple","Amazon","Meta","Netflix"],r=["Software Engineer","Product Manager","Data Scientist","UX Designer"];return Array.from({length:10},(o,a)=>({id:`fallback_${Date.now()}_${a}`,title:`${r[a%r.length]} - ${t.query}`,company:e[a%e.length],location:t.location||"Remote",description:`Exciting opportunity to work on ${t.query} projects at a leading tech company.`,salary:"$100k - $150k",jobType:["Full-time"],postedDate:`${a+1} days ago`,applyUrl:"#",source:"linkedin",requirements:["3+ years experience","Bachelor's degree"],benefits:["Health Insurance","Stock Options","Remote Work"]}))}isRealDataEnabled(){return this.useRealData&&!!this.rapidApiKey}getApiStatus(){const t=!!this.rapidApiKey,e=this.useRealData;let r="";return t?e?r="Real data mode enabled. Fetching jobs from LinkedIn, Indeed, and Glassdoor.":r="Real data mode disabled. Set VITE_USE_REAL_DATA=true in .env file.":r="RapidAPI key not configured. Add VITE_RAPIDAPI_KEY to .env file.",{enabled:e,hasKey:t,message:r}}}const c=new i;export{c as default,c as jobBoardsApi};
